{
  "apps": [
    {
      "name": "frontend",
      "script": "./build/dist/frontend-server.js",
      "env_dev": {
        "FRONTEND_PORT": "3000"
      },
      "env_staging": {
        "FRONTEND_PORT": "3010"
      },
      "env_production": {
        "FRONTEND_PORT": "3020"
      }
    },
    {
      "name": "graphql",
      "script": "./build/dist/graphql-server.js",
      "env_dev": {
        "GRAPHQL_PORT": "8080"
      },
      "env_staging": {
        "GRAPHQL_PORT": "8090"
      },
      "env_production": {
        "GRAPHQL_PORT": "9000"
      }
    }
  ],
  "deploy": {
    "production": {
      "user": "git",
      "host": "107.170.208.241",
      "ref" : "origin/master",
      "repo": "git@github.com:rblakeley/terrafarm-digital-ocean.git",
      "path": "/srv/www/production",
      "pre-deploy-local" : "echo 'Preparing to deploy to production...'",
      "post-deploy": "npm install ; npm run build ; pm2 startOrRestart ecosystem.json --env production",
      "env": {
        "NODE_ENV": "production"
      }
    },
    "staging": {
      "user": "git",
      "host": "107.170.208.241",
      "ref": "origin/staging",
      "repo": "git@github.com:rblakeley/terrafarm-digital-ocean.git",
      "path": "/srv/www/staging",
      "pre-deploy-local" : "echo 'Preparing to deploy to staging...'",
      "post-deploy": "npm install ; npm run build ; pm2 startOrRestart ecosystem.json --env staging",
      "env": {
        "NODE_ENV": "staging"
      }
    },
    "dev": {
      "user": "git",
      "host": "107.170.208.241",
      "ref": "origin/dev",
      "repo": "git@github.com:rblakeley/terrafarm-digital-ocean.git",
      "path": "/srv/www/dev",
      "pre-deploy-local" : "echo 'Preparing to deploy to dev...'",
      "post-deploy": "npm install ; npm run build ; pm2 startOrRestart ecosystem.json --env dev",
      "env": {
        "NODE_ENV": "dev"
      }
    }
  }
}
